# プロンプト管理ガイド

カスタムプロンプトを効果的に管理して、記事の質とバリエーションを向上させる方法を解説します。

## 📋 目次

1. [プロンプト管理とは](#プロンプト管理とは)
2. [基本的な使い方](#基本的な使い方)
3. [プロンプトの設計](#プロンプトの設計)
4. [ベストプラクティス](#ベストプラクティス)
5. [実践例](#実践例)

---

## プロンプト管理とは

プロンプト管理ツールは、記事生成に使用するClaude APIへの指示(プロンプト)をJSON形式で管理します。

### なぜプロンプト管理が必要か?

✅ **トーンの使い分け**
- カジュアルアプリ向け：軽めのフレンドリーな文章
- 真剣婚活向け：落ち着いた誠実な文章

✅ **効果測定**
- どのプロンプトが良い記事を生成するか記録
- 改善を繰り返してプロンプトを最適化

✅ **チーム共有**
- JSON形式なのでGitで管理
- 効果的なプロンプトをチーム全体で共有

✅ **バージョン管理**
- 過去のプロンプトを保存
- いつでも元に戻せる

---

## 基本的な使い方

### プロンプト一覧の確認

```bash
python3 scripts/manage_prompts.py list
```

**出力:**
```
📋 登録済みプロンプト (2件)

ID: default-review
  名前: デフォルトレビュー
  タイプ: review
  説明: 標準的なレビュー記事プロンプト

ID: casual-review
  名前: カジュアル向けレビュー
  タイプ: review
  説明: 軽い雰囲気のレビュー記事
```

### プロンプトの追加

```bash
python3 scripts/manage_prompts.py add
```

対話形式で情報を入力します。

### プロンプトの詳細表示

```bash
python3 scripts/manage_prompts.py show casual-review
```

プロンプトの全内容を確認できます。

### プロンプトの削除

```bash
python3 scripts/manage_prompts.py delete casual-review
```

確認が求められるので安全です。

### プロンプトのエクスポート

```bash
python3 scripts/manage_prompts.py export casual-review
```

`data/prompts/casual-review.txt` にテキストファイルとして保存されます。

---

## プロンプトの設計

効果的なプロンプトを作成するための指針:

### 1. 明確な役割設定

```
❌ NG: あなたは記事を書きます。
✅ OK: あなたは20代男性向けマッチングアプリの専門レビュアーです。
```

### 2. 具体的な指示

```
❌ NG: 良い記事を書いてください。
✅ OK: 以下の構成で3000-4000字の記事を作成してください:
      1. 導入(200-300字)
      2. 基本情報(400-500字)
      ...
```

### 3. トーン&マナーの指定

```
フレンドリーで親しみやすい先輩のアドバイス
専門用語は避け、わかりやすく
ポジティブだが正直な評価
```

### 4. 制約条件の明示

```
- 文字数: 3000-4000字
- SEOキーワード: {app_name} 評判, {app_name} 口コミ
- 見出しレベル: H2, H3のみ使用
```

### 5. 出力形式の指定

```
必ずMarkdownフォーマットで、以下のFront Matterを含めてください:

---
title: "..."
description: "..."
...
---

(本文)
```

### 6. 変数プレースホルダーの使用

使用可能な変数:
- `{app_name}`: アプリ名
- `{category}`: カテゴリ
- `{price}`: 料金
- `{target_age}`: 対象年齢
- `{features}`: 主要機能
- `{rating}`: 評価
- `{date}`: 記事生成日
- `{app_name_slug}`: URL用スラッグ

---

## ベストプラクティス

### 1. プロンプトID命名規則

わかりやすく一貫性のある命名:

```
✅ 推奨:
- casual-review          (カジュアル向けレビュー)
- serious-marriage       (真剣婚活向けレビュー)
- ranking-top10          (トップ10ランキング)
- howto-profile          (プロフィール作成ハウツー)

❌ 非推奨:
- review1, review2       (内容が不明)
- test, temp             (用途が不明)
```

### 2. プロンプトのバージョン管理

効果測定しながら改善:

```bash
# 初期バージョン
casual-review-v1

# 改善版
casual-review-v2

# 最新版 (バージョン番号なし = 最新)
casual-review
```

### 3. カテゴリ別プロンプト

アプリのカテゴリごとに最適化:

```
casual-app-review        # カジュアル系アプリ用
serious-dating-review    # 真剣恋活アプリ用
marriage-app-review      # 婚活アプリ用
```

### 4. プロンプトの定期的な見直し

週1回または月1回、効果を確認:

```markdown
# プロンプト効果測定シート

| プロンプトID | 使用回数 | 平均文字数 | SEOスコア | 備考 |
|-------------|---------|-----------|----------|------|
| casual-review | 5回 | 3500字 | 85点 | 良好 |
| serious-marriage | 3回 | 4200字 | 92点 | 優秀 |
```

### 5. プロンプトのバックアップ

定期的にエクスポート:

```bash
# すべてのプロンプトをエクスポート
for id in $(python3 scripts/manage_prompts.py list | grep "ID:" | awk '{print $2}'); do
    python3 scripts/manage_prompts.py export $id
done
```

---

## 実践例

### ケース1: カジュアルアプリ向けプロンプト

**目的:** Tinderなどの軽い出会い系アプリのレビュー

**プロンプトID:** `casual-friendly-review`

**プロンプト内容:**
```
あなたは20代のマッチングアプリユーザーで、友達に気軽にアドバイスする立場です。

# 記事の雰囲気
- フレンドリーで親しみやすい
- 絵文字を適度に使用(見出しに1-2個程度)
- 口語的な表現もOK
- 「です・ます」調

# 重点ポイント
- 気軽な出会いの可能性
- マッチングのしやすさ
- アプリの使いやすさ
- コスパの良さ

# 避けるべき内容
- 真剣な結婚の話
- 重すぎるトーン
- 堅苦しい表現
```

### ケース2: 婚活アプリ向けプロンプト

**目的:** Omiaiなどの真剣婚活アプリのレビュー

**プロンプトID:** `serious-marriage-review`

**プロンプト内容:**
```
あなたは婚活コンサルタントで、30代の結婚を真剣に考えている男性にアドバイスする立場です。

# 記事の雰囲気
- 誠実で信頼できる
- 落ち着いたトーン
- データや数字を重視
- 「です・ます」調

# 重点ポイント
- 結婚に対する真剣度
- 年齢層と職業分布
- 安全性・本人確認の徹底
- 長期的な関係構築の可能性

# 避けるべき内容
- 軽いノリ
- カジュアルな出会いの推奨
- 絵文字の多用
```

### ケース3: 比較・ランキング記事用プロンプト

**目的:** 複数アプリの比較記事

**プロンプトID:** `ranking-comparison`

**プロンプト内容:**
```
あなたはマッチングアプリの専門家で、複数のアプリを公平に比較評価します。

# 記事構成
1. 導入 - なぜこのランキングが必要か
2. 選定基準 - 何を基準に選んだか
3. ランキング発表 - 1位から順番に
4. 各アプリの詳細 - 特徴・メリット・デメリット
5. まとめ - 用途別おすすめ

# 比較軸
- 会員数・年齢層
- 料金・コスパ
- マッチング率
- 安全性
- 使いやすさ

# 注意点
- 特定のアプリに偏らない
- データに基づく評価
- 個人の用途に合わせた推奨
```

---

## プロンプトテンプレート集

コピペして使えるテンプレート:

### 基本テンプレート

```
あなたは[役割]です。
[対象読者]向けに、[目的]の記事を作成してください。

# アプリ情報
- アプリ名: {app_name}
- カテゴリ: {category}
- 料金: {price}
- 対象年齢: {target_age}
- 主要機能: {features}
- 評価: {rating}/5.0

# 記事要件
## 文字数
[指定文字数]

## 記事構成
1. [セクション1] ([文字数])
2. [セクション2] ([文字数])
...

## トーン＆マナー
- [トーンの説明]
- [文体の指定]
- [避けるべき表現]

# 出力形式
Markdownフォーマットで、Front Matterを含めてください。
```

### レビュー記事用

```
あなたはマッチングアプリの専門レビュアーです。
{target_age}男性向けに、実際に使った経験をもとにした詳細なレビュー記事を作成してください。

[以下、具体的な指示を記載]
```

### ランキング記事用

```
あなたはマッチングアプリの比較専門家です。
{category}カテゴリのアプリを比較して、ランキング形式で紹介する記事を作成してください。

[以下、具体的な指示を記載]
```

### ハウツー記事用

```
あなたはマッチングアプリの使い方を教える講師です。
初心者向けに、{topic}について分かりやすく解説する記事を作成してください。

[以下、具体的な指示を記載]
```

---

## トラブルシューティング

### プロンプトが見つからない

```bash
# プロンプト一覧で確認
python3 scripts/manage_prompts.py list

# IDを正確に入力しているか確認
python3 scripts/manage_prompts.py show <正確なID>
```

### プロンプトが長すぎる

プロンプトはファイルから読み込むこともできます:

```bash
# プロンプトをテキストファイルに保存
nano my-prompt.txt

# ファイルから読み込んで追加
python3 scripts/manage_prompts.py add < my-prompt.txt
```

### JSONファイルが壊れた

バックアップから復元:

```bash
# Gitで管理している場合
git checkout data/prompts.json

# 手動バックアップから復元
cp data/prompts.json.backup data/prompts.json
```

---

## まとめ

プロンプト管理を効果的に使うポイント:

1. ✅ **目的別にプロンプトを作成** - カジュアル/真剣など
2. ✅ **命名規則を統一** - わかりやすいID
3. ✅ **定期的に効果測定** - どのプロンプトが良いか記録
4. ✅ **バージョン管理** - 改善を繰り返す
5. ✅ **チームで共有** - 良いプロンプトは共有財産

効果的なプロンプト管理で、記事の質とバリエーションを向上させましょう!
